(this["webpackJsonpbeejee-task-manager-app"]=this["webpackJsonpbeejee-task-manager-app"]||[]).push([[0],{151:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),s=n.n(c),o=(n(151),"CURRENT_PAGE_URL"),i="USER_DATA",u=function(e){return{type:i,value:e}},l=n(31),b=n(19),d="test-task-backend-session";function j(e,t){localStorage.setItem(d,JSON.stringify({username:e,token:t}))}function p(){var e=localStorage.getItem(d);return e?JSON.parse(e).username:null}function m(){var e=localStorage.getItem(d);return e?JSON.parse(e).token:null}function f(){localStorage.removeItem(d)}var g=n(46),h=n(235),O=n(237),x=n(238),v=n(240),k=n(2),w=function(e){var t=e.currentPage,n=e.username,a=e.handleLogout;return Object(k.jsxs)("dir",{className:"flex-column p-1 left-panel",children:[Object(k.jsx)(h.a,{component:g.b,to:"/?page=".concat(t),startIcon:Object(k.jsx)(O.a,{className:"r-90"}),size:"large",variant:"outlined",children:"Tasks"}),n?Object(k.jsx)(h.a,{onClick:a,variant:"outlined",size:"large",startIcon:Object(k.jsx)(x.a,{}),children:"Logout"}):Object(k.jsx)(h.a,{component:g.b,to:"/login",variant:"outlined",size:"large",startIcon:Object(k.jsx)(v.a,{}),children:"Login"})]})},C=function(){var e=Object(l.c)((function(e){return{currentPage:e.currentPage,userData:e.userData}})),t=e.currentPage,n=e.userData,a=Object(l.b)(),r=n.username;return Object(k.jsx)(w,{username:r,currentPage:t,handleLogout:function(){f(),a(u({}))}})},y=n(22),P=n.n(y),S=n(38),L=n(35),N=n(260),E=n(261),D=n(4),T=n(11),I=n(82),F=n(252),U=["name"],_=function(e){var t=e.fieldList,n=e.onChange,a=e.errorList;return t.map((function(e){var t,r=e.name,c=Object(I.a)(e,U);return Object(k.jsx)(F.a,Object(L.a)(Object(L.a)({className:"mb-1",name:r},c),{},{error:Boolean(a[r]),onChange:n,helperText:null!==(t=a[r])&&void 0!==t?t:" "}),r)}))},B=function(e){var t,n=e.onSubmitClick,r=e.fieldList,c=e.className,s=e.children,o=Object(a.useState)({}),i=Object(T.a)(o,2),u=i[0],l=i[1],b=Object(a.useState)({}),d=Object(T.a)(b,2),j=d[0],p=d[1],m=function(){var e=Object(S.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,n(j);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:null!==(t="flex-column content-space-between "+c)&&void 0!==t?t:"",children:[Object(k.jsx)(_,{fieldList:r,onChange:function(e){var t=e.target;return p(Object(L.a)(Object(L.a)({},j),{},Object(D.a)({},t.name,t.value)))},errorList:u}),Object(k.jsx)(E.a,{variant:"contained",onClick:m,children:s})]})},z="error",M="ok",R={login:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c",create:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430",edit:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430"},A={username:"Name",email:"E-mail",text:"Task discription",password:"Password",token:"Ky\u043a\u0438\u0441\u044b"},J=[{name:"username",label:"Username"},{name:"password",label:"Password",type:"password"}],W=[{name:"username",label:"Name"},{name:"email",label:"E-mail"},{name:"text",label:"Task discription",rows:4,multiline:!0}],G=function(e){var t=e.userData,n=e.currentPageUrl,a=e.handleLogin,r=e.message;return Object(k.jsx)("div",{className:"flex-column f-1 content-center",children:t.username?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,{children:"You are logged in as ".concat(t.username,".")}),Object(k.jsx)(E.a,{component:g.b,to:"/?page=".concat(n),variant:"outlined",children:"Go back to the Task Page"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,Object(L.a)({},r)),Object(k.jsx)(B,{onSubmitClick:a,fieldList:J,className:"login-form",children:"Login"})]})})},V=n(125),Y=n.n(V),q=n(54),H=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{result:null!==(e=n.status)&&void 0!==e?e:z,message:null!==(t=n.message)&&void 0!==t?t:{}}},K=Y.a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2"}),$="Example";function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(S.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={developer:$},e.prev=1,e.next=4,K.get(t,{params:n});case 4:return a=e.sent,e.abrupt("return",{tasks:a.data.message.tasks,totalPageCount:Math.ceil(a.data.message.total_task_count/3)});case 8:return e.prev=8,e.t0=e.catch(1),q.b.error(e.t0),e.abrupt("return",{tasks:[],totalPageCount:0});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(S.a)(P.a.mark((function e(t,n){var a,r,c,s,o,i,u,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.prefix,r=t.id,c=new FormData,Object.keys(n).forEach((function(e){c.append(e,n[e])})),s={method:"post",url:"/".concat(a).concat(r?"/".concat(r):"","?developer=").concat($),data:c},e.prev=4,e.next=7,K(s);case 7:o=e.sent,i=H(o.data),u=i.result,l=i.message,e.t0=u,e.next=e.t0===z?12:e.t0===M?14:16;break;case 12:return Object.keys(l).forEach((function(e){q.b.error("".concat(A[e],": ").concat(l[e]))})),e.abrupt("break",17);case 14:return q.b.success(R[a]),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:return e.abrupt("return",{result:u,message:l});case 20:return e.prev=20,e.t1=e.catch(4),q.b.error(e.t1),e.abrupt("return",H());case 24:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}var te=n(129),ne=function(e){var t=e.match(Object(te.a)(/^\/login\/(0)/,{param:1}));return t&&"0"===t.groups.param?{color:"error",children:"You need to log in"}:{}},ae=function(e){var t,n=e.location,r=Object(l.c)((function(e){return{currentPageUrl:e.currentPageUrl,userData:e.userData}})),c=r.currentPageUrl,s=r.userData,o=Object(l.b)(),i=null!==(t=p())&&void 0!==t?t:s.username;Object(a.useEffect)((function(){i&&i!==s.username&&o(u({username:i}))}),[i]);var b=function(){var e=Object(S.a)(P.a.mark((function e(t){var n,a,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z({prefix:"login"},t);case 2:return n=e.sent,a=n.result,r=n.message,a===M&&(j(t.username,r.token),o(u({username:t.username}))),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)(G,{userData:s,currentPageUrl:c,message:ne(n.pathname),handleLogout:function(){f(),u({})},handleLogin:b})},re=n(255),ce=n(256),se=n(262),oe=n(258),ie=n(242),ue=function(e){var t=e.label,n=e.options,a=e.value,r=e.onChange;return Object(k.jsxs)(oe.a,{component:"fieldset",children:[Object(k.jsx)(ie.a,{component:"legend",children:t}),Object(k.jsx)(ce.a,{row:!0,value:a,onChange:function(e,t){return r(t)},children:n.map((function(e){return Object(k.jsx)(se.a,{value:e,control:Object(k.jsx)(re.a,{}),label:e},e)}))})]})},le=function(e){var t=e.sortField,n=e.sortDirection,a=e.handleChange,r=e.handleCreateTask;return Object(k.jsxs)("div",{className:"flex-column content-space-between",children:[Object(k.jsxs)("div",{className:"flex-column sort-tools",children:[Object(k.jsx)(ue,{label:"Sort Field",options:["username","email","status"],value:t,onChange:function(e){return a({sortField:e})}}),Object(k.jsx)(ue,{label:"Sort Directions",options:["asc","desc"],value:n,onChange:function(e){return a({sortDirection:e})}})]}),Object(k.jsx)(B,{onSubmitClick:r,fieldList:W,className:"mb-78",children:"Submit"})]})},be=n(245),de=n(128),je=n(257),pe=n(27),me=n(246),fe={0:"Task not completed",1:"Task not completed, edited by admin",10:"Mission accomplished",11:"The task was edited by the admin and completed"},ge=Object(be.a)({ExpandMoreIcon:{fontSize:"large"},statusMenuItem:{display:"block"},div:function(e){return{cursor:e.isEditingEnabled?"arrow":"pointer",marginLeft:"auto"}}}),he=Object(pe.a)({paper:{border:"2px solid rgba(49, 54, 65, 1)","& .MuiList-root":{padding:0}}})((function(e){return Object(k.jsx)(de.a,Object(L.a)({elevation:0,getvontentanchorel:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),Oe=function(e){var t=e.value,n=e.onChange,r=e.isEditingEnabled,c=ge({isEditingEnabled:r}),s=Object(a.useState)(null),o=Object(T.a)(s,2),i=o[0],u=o[1],l=Boolean(i);return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(h.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:r?function(e){var t=e.currentTarget;u(t)}:function(){},endIcon:r?Object(k.jsx)(me.a,{}):void 0,children:"Status: ".concat(fe[t])}),r&&Object(k.jsx)(he,{id:"basic-menu",anchorEl:i,open:l,onClose:function(){return u(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object.keys(fe).map((function(e){return Object(k.jsx)(je.a,{className:c.statusMenuItem,selected:e==t,onClick:function(){return t=Number(e),u(null),void n(t);var t},children:fe[e]},e)}))})]})})},xe=n(263),ve=n(249),ke=n(250),we=n(126),Ce=n.n(we),ye=n(251),Pe=n(247),Se=n(248),Le=Object(be.a)({noBorder:{border:"none"},marginLeftAuto:{marginLeft:"auto"}}),Ne=function(e){var t=e.data,n=e.userIsLogin,r=e.handleEditTask,c=Object(a.useState)(t.text),s=Object(T.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(t.status),l=Object(T.a)(u,2),b=l[0],d=l[1],j=Le(),p=Object(a.useState)(!1),m=Object(T.a)(p,2),f=m[0],g=m[1];return Object(k.jsxs)("dir",{className:"p-1 flex-column task-box",children:[Object(k.jsxs)("dir",{className:"flex-row",children:[Object(k.jsx)(xe.a,{icon:Object(k.jsx)(Pe.a,{}),label:t.username}),Object(k.jsx)(xe.a,{icon:Object(k.jsx)(Se.a,{}),label:t.email})]}),f?Object(k.jsx)(F.a,{variant:"outlined",fullWidth:!0,defaultValue:t.text,onChange:function(e){return i(e.target.value)}}):Object(k.jsx)(ve.a,{children:t.text}),Object(k.jsxs)("dir",{className:"flex-row",children:[Object(k.jsx)(Oe,{value:b,onChange:function(e){return d(e)},isEditingEnabled:f}),n&&Object(k.jsx)(ke.a,{className:j.marginLeftAuto,size:"small",onClick:function(){f&&r({id:t.id,text:o,taskStatus:b}),g(!f)},children:f?Object(k.jsx)(ye.a,{}):Object(k.jsx)(Ce.a,{})})]})]})},Ee=["tasks"],De=function(e){var t=e.tasks,n=Object(I.a)(e,Ee);return Object(k.jsx)("dir",{className:"flex-column f-1 p-1",children:t.map((function(e){return Object(k.jsx)(Ne,Object(L.a)({data:e},n),e.id)}))})},Te=n(253),Ie=Object(be.a)({pagination:{marginBottom:"1rem","& > ul":{justifyContent:"center"}}}),Fe=function(e){var t=e.totalPageCount,n=e.curentPage,a=e.onPageChange,r=Ie();return Object(k.jsx)(Te.a,{className:r.pagination,count:t,size:"large",page:n,shape:"rounded",onChange:function(e,t){return a(t)},showFirstButton:!0,showLastButton:!0})},Ue=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},_e=function(e){var t=e.history,n=e.location,r=Object(l.c)((function(e){return e.userData})),c=Object(a.useState)([]),s=Object(T.a)(c,2),i=s[0],b=s[1],d=Object(a.useState)(0),j=Object(T.a)(d,2),p=j[0],g=j[1],h=Object(l.b)(),O=function(e){var t=new URLSearchParams(e);return{page:parseInt(t.get("page")),sortDirection:t.get("sort_direction"),sortField:t.get("sort_field")}}(n.search);function x(){return v.apply(this,arguments)}function v(){return v=Object(S.a)(P.a.mark((function e(){var t,a,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(n.search);case 2:t=e.sent,a=t.tasks,r=t.totalPageCount,b(a),g(r);case 7:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function w(){return(w=Object(S.a)(P.a.mark((function e(t){var n,a,r,c,s,o,i,u,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.email,c=void 0===r?"":r,s=t.text,o=void 0===s?"":s,e.next=3,Z({prefix:"create"},{username:a,email:c,text:Ue(o)});case 3:if(i=e.sent,u=i.result,l=i.message,u!==M){e.next=9;break}return x(O),e.abrupt("return",{});case 9:return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){var a=n.pathname+function(e,t){var n,a,r,c=new URLSearchParams;return c.append("sort_field",null!==(n=e.sortField)&&void 0!==n?n:t.sortField),c.append("sort_direction",null!==(a=e.sortDirection)&&void 0!==a?a:t.sortDirection),c.append("page",null!==(r=e.page)&&void 0!==r?r:t.page),"?".concat(c.toString())}(e,O);h({type:o,value:a}),t.push(a)},y=function(){var e=Object(S.a)(P.a.mark((function e(n){var a,r,c,s,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,r=n.text,e.next=3,Z({prefix:"edit",id:a},{text:Ue(r),token:m()});case 3:c=e.sent,s=c.result,o=c.message,s===z&&o.token&&(f(),h(u({})),t.push("/login/0")),s===M&&x();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[n.search]),Object(k.jsxs)("dir",{className:"flex-row f-1",children:[Object(k.jsxs)("dir",{className:"flex-column f-1 content-space-between",children:[Object(k.jsx)(De,{tasks:i,userIsLogin:Boolean(r.username),handleEditTask:y}),Object(k.jsx)(Fe,{totalPageCount:p,curentPage:O.page,onPageChange:function(e){return C({page:e})}})]}),Object(k.jsx)(le,{sortDirection:O.sortDirection,sortField:O.sortField,handleChange:C,handleCreateTask:function(e){return w.apply(this,arguments)}})]})};_e.defaultProps={history:{},location:{}};var Be=_e,ze={pathname:"/tasks",search:"?sort_field=username&sort_direction=asc&page=1"};var Me=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e(u({username:p()}))}),[e]),Object(k.jsxs)("dir",{className:"app",children:[Object(k.jsx)(C,{}),Object(k.jsxs)(b.d,{children:[Object(k.jsx)(b.b,{path:"/tasks",component:Be}),Object(k.jsx)(b.b,{exact:!0,path:"/",children:Object(k.jsx)(b.a,{to:ze})}),Object(k.jsx)(b.b,{path:"/login",component:ae})]})]})},Re=n(130),Ae=n(127),Je=Object(Re.b)({currentPageUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===o?a:e},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===i?a:e}}),We=Je,Ge=Object(Re.c)(We,Object(Re.a)(Ae.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(182);s.a.render(Object(k.jsxs)(r.a.StrictMode,{children:[Object(k.jsx)(l.a,{store:Ge,children:Object(k.jsx)(g.a,{children:Object(k.jsx)(Me,{})})}),Object(k.jsx)(q.a,{position:"top-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[183,1,2]]]);
//# sourceMappingURL=main.b7f6671a.chunk.js.map