(this["webpackJsonpbeejee-task-manager-app"]=this["webpackJsonpbeejee-task-manager-app"]||[]).push([[0],{148:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),s=n.n(c),o=(n(148),"CURRENT_PAGE_URL"),i="USER_DATA",u=function(e){return{type:i,value:e}},l=n(30),d=n(18),p="test-task-backend-session";function j(e,t){localStorage.setItem(p,JSON.stringify({username:e,token:t}))}function b(){var e=localStorage.getItem(p);return e?JSON.parse(e).username:null}function m(){var e=localStorage.getItem(p);return e?JSON.parse(e).token:null}function f(){localStorage.removeItem(p)}var h=n(45),g=n(232),O=n(234),v=n(235),x=n(237),k=n(2),w=function(e){var t=e.currentPage,n=e.username,a=e.handleLogout;return Object(k.jsxs)("dir",{className:"flex-column p-1 left-panel",children:[Object(k.jsx)(g.a,{component:h.b,to:"/?page=".concat(t),startIcon:Object(k.jsx)(O.a,{className:"r-90"}),size:"large",variant:"outlined",children:"Tasks"}),n?Object(k.jsx)(g.a,{onClick:a,variant:"outlined",size:"large",startIcon:Object(k.jsx)(v.a,{}),children:"Logout"}):Object(k.jsx)(g.a,{component:h.b,to:"/login",variant:"outlined",size:"large",startIcon:Object(k.jsx)(x.a,{}),children:"Login"})]})},C=function(){var e=Object(l.c)((function(e){return{currentPage:e.currentPage,userData:e.userData}})),t=e.currentPage,n=e.userData,a=Object(l.b)(),r=n.username;return Object(k.jsx)(w,{username:r,currentPage:t,handleLogout:function(){f(),a(u({}))}})},y=n(17),S=n.n(y),L=n(31),P=n(24),N=n(255),E=n(256),D=n(4),I=n(11),F=n(81),T=n(247),U=["name"],_=function(e){var t=e.fieldList,n=e.onChange,a=e.errorList;return t.map((function(e){var t,r=e.name,c=Object(F.a)(e,U);return Object(k.jsx)(T.a,Object(P.a)(Object(P.a)({name:r},c),{},{error:Boolean(a[r]),onChange:n,helperText:null!==(t=a[r])&&void 0!==t?t:" "}),r)}))},M=function(e){var t,n=e.onSubmitClick,r=e.fieldList,c=e.className,s=e.children,o=Object(a.useState)({}),i=Object(I.a)(o,2),u=i[0],l=i[1],d=Object(a.useState)({}),p=Object(I.a)(d,2),j=p[0],b=p[1],m=function(){var e=Object(L.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,n(j);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:null!==(t="flex-column content-space-between "+c)&&void 0!==t?t:"",children:[Object(k.jsx)(_,{fieldList:r,onChange:function(e){var t=e.target;return b(Object(P.a)(Object(P.a)({},j),{},Object(D.a)({},t.name,t.value)))},errorList:u}),Object(k.jsx)(E.a,{variant:"contained",onClick:m,children:s})]})},B=[{name:"username",label:"Username"},{name:"password",label:"Password"}],z=function(e){var t=e.userData,n=e.currentPageUrl,a=e.handleLogin,r=e.message;return Object(k.jsx)("div",{className:"flex-column f-1 content-center",children:t.username?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,{children:"You are logged in as ".concat(t.username,".")}),Object(k.jsx)(E.a,{component:h.b,to:"/?page=".concat(n),variant:"outlined",children:"Go back to the Task Page"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,Object(P.a)({},r)),Object(k.jsx)(M,{onSubmitClick:a,fieldList:B,className:"login-form",children:"Login"})]})})},R=n(121),A=n.n(R).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2"}),J="Example";function W(e){return G.apply(this,arguments)}function G(){return(G=Object(L.a)(S.a.mark((function e(t){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={developer:J},e.prev=1,e.next=4,A.get(t,{params:n});case 4:return a=e.sent,e.abrupt("return",{tasks:a.data.message.tasks,totalPageCount:Math.ceil(a.data.message.total_task_count/3)});case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Y(e){return q.apply(this,arguments)}function q(){return(q=Object(L.a)(S.a.mark((function e(t){var n,a,r,c,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.password,c=void 0===r?"":r,e.prev=1,(s=new FormData).append("username",a),s.append("password",c),o={method:"post",url:"/login?developer=".concat(J),data:s},e.next=8,A(o);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function V(e){return $.apply(this,arguments)}function $(){return($=Object(L.a)(S.a.mark((function e(t){var n,a,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.email,r=t.text,e.prev=1,(c=new FormData).append("username",n),c.append("email",a),c.append("text",r),s={method:"post",url:"/create?developer=".concat(J),data:c},e.next=9,A(s);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function H(e){return K.apply(this,arguments)}function K(){return(K=Object(L.a)(S.a.mark((function e(t){var n,a,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.text,r=t.taskStatus,e.prev=1,(c=new FormData).append("id",n),c.append("text",a),c.append("status",r),c.append("token",m()),s={method:"post",url:"/edit/".concat(n,"?developer=").concat(J),data:c},e.next=10,A(s);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var Q=n(125),X=function(e){var t=e.match(Object(Q.a)(/^\/login\/(0)/,{param:1}));return t&&"0"===t.groups.param?{color:"error",children:"You need to log in"}:{}},Z=function(e){var t,n=e.location,r=Object(l.c)((function(e){return{currentPageUrl:e.currentPageUrl,userData:e.userData}})),c=r.currentPageUrl,s=r.userData,o=Object(l.b)(),i=null!==(t=b())&&void 0!==t?t:s.username;Object(a.useEffect)((function(){i&&i!==s.username&&o(u({username:i}))}),[i]);var d=function(){var e=Object(L.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:if(200!==(n=e.sent).status||"ok"!==n.data.status){e.next=7;break}return j(t.username,n.data.message.token),o(u({username:t.username})),e.abrupt("return",{});case 7:return e.abrupt("return",n.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)(z,{userData:s,currentPageUrl:c,message:X(n.pathname),handleLogout:function(){f(),u({})},handleLogin:d})},ee=n(250),te=n(251),ne=n(257),ae=n(253),re=n(239),ce=function(e){var t=e.label,n=e.options,a=e.value,r=e.onChange;return Object(k.jsxs)(ae.a,{component:"fieldset",children:[Object(k.jsx)(re.a,{component:"legend",children:t}),Object(k.jsx)(te.a,{row:!0,value:a,onChange:function(e,t){return r(t)},children:n.map((function(e){return Object(k.jsx)(ne.a,{value:e,control:Object(k.jsx)(ee.a,{}),label:e},e)}))})]})},se=[{name:"username",label:"Name"},{name:"email",label:"E-mail"},{name:"text",label:"Task discription",rows:4,multiline:!0}],oe=function(e){var t=e.sortField,n=e.sortDirection,a=e.handleChange,r=e.handleCreateTask;return Object(k.jsxs)("div",{className:"flex-column content-space-between",children:[Object(k.jsxs)("div",{className:"flex-column sort-tools",children:[Object(k.jsx)(ce,{label:"Sort Field",options:["username","email","status"],value:t,onChange:function(e){return a({sortField:e})}}),Object(k.jsx)(ce,{label:"Sort Directions",options:["asc","desc"],value:n,onChange:function(e){return a({sortDirection:e})}})]}),Object(k.jsx)(M,{onSubmitClick:r,fieldList:se,className:"margin-bottom-72",children:"Submit"})]})},ie=n(242),ue=n(124),le=n(252),de=n(35),pe=n(243),je={0:"Task not completed",1:"Task not completed, edited by admin",10:"Mission accomplished",11:"The task was edited by the admin and completed"},be=Object(ie.a)({ExpandMoreIcon:{fontSize:"large"},statusMenuItem:{display:"block"},div:function(e){return{cursor:e.isEditingEnabled?"arrow":"pointer",marginLeft:"auto"}}}),me=Object(de.a)({paper:{border:"2px solid rgba(49, 54, 65, 1)","& .MuiList-root":{padding:0}}})((function(e){return Object(k.jsx)(ue.a,Object(P.a)({elevation:0,getvontentanchorel:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),fe=function(e){var t=e.value,n=e.onChange,r=e.isEditingEnabled,c=be({isEditingEnabled:r}),s=Object(a.useState)(null),o=Object(I.a)(s,2),i=o[0],u=o[1],l=Boolean(i);return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(g.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:r?function(e){var t=e.currentTarget;u(t)}:function(){},endIcon:r?Object(k.jsx)(pe.a,{}):void 0,children:"Status: ".concat(je[t])}),r&&Object(k.jsx)(me,{id:"basic-menu",anchorEl:i,open:l,onClose:function(){return u(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object.keys(je).map((function(e){return Object(k.jsx)(le.a,{className:c.statusMenuItem,selected:e==t,onClick:function(){return t=Number(e),u(null),void n(t);var t},children:je[e]},e)}))})]})})},he=n(244),ge=n(245),Oe=n(122),ve=n.n(Oe),xe=n(246),ke=Object(ie.a)({noBorder:{border:"none"},marginLeftAuto:{marginLeft:"auto"}}),we=function(e){var t=e.data,n=e.userIsLogin,r=e.handleEditTask,c=Object(a.useState)(t.text),s=Object(I.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(t.status),l=Object(I.a)(u,2),d=l[0],p=l[1],j=ke(),b=Object(a.useState)(!1),m=Object(I.a)(b,2),f=m[0],h=m[1];return Object(k.jsxs)("dir",{className:"p-1 flex-column task-box",children:[Object(k.jsx)("dir",{children:Object(k.jsx)(he.a,{children:"USERNAME: ".concat(t.username," E-MAIL: ").concat(t.email)})}),f?Object(k.jsx)(T.a,{variant:"outlined",fullWidth:!0,defaultValue:t.text,onChange:function(e){return i(e.target.value)}}):Object(k.jsx)(he.a,{children:t.text}),Object(k.jsxs)("dir",{className:"flex-row",children:[Object(k.jsx)(fe,{value:d,onChange:function(e){return p(e)},isEditingEnabled:f}),n&&Object(k.jsx)(ge.a,{className:j.marginLeftAuto,size:"small",onClick:function(){f&&r({id:t.id,text:o,taskStatus:d}),h(!f)},children:f?Object(k.jsx)(xe.a,{}):Object(k.jsx)(ve.a,{})})]})]})},Ce=["tasks"],ye=function(e){var t=e.tasks,n=Object(F.a)(e,Ce);return Object(k.jsx)("dir",{className:"flex-column f-1 p-1",children:t.map((function(e){return Object(k.jsx)(we,Object(P.a)({data:e},n),e.id)}))})},Se=n(248),Le=Object(ie.a)({pagination:{marginBottom:"1rem","& > ul":{justifyContent:"center"}}}),Pe=function(e){var t=e.totalPageCount,n=e.curentPage,a=e.onPageChange,r=Le();return Object(k.jsx)(Se.a,{className:r.pagination,count:t,size:"large",page:n,shape:"rounded",onChange:function(e,t){return a(t)},showFirstButton:!0,showLastButton:!0})},Ne=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Ee=function(e){var t=e.history,n=e.location,r=Object(l.c)((function(e){return e.userData})),c=Object(a.useState)([]),s=Object(I.a)(c,2),i=s[0],d=s[1],p=Object(a.useState)(0),j=Object(I.a)(p,2),b=j[0],m=j[1],h=Object(l.b)(),g=function(e){var t=new URLSearchParams(e);return{page:parseInt(t.get("page")),sortDirection:t.get("sort_direction"),sortField:t.get("sort_field")}}(n.search);function O(){return v.apply(this,arguments)}function v(){return v=Object(L.a)(S.a.mark((function e(){var t,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(n.search);case 2:t=e.sent,a=t.tasks,r=t.totalPageCount,d(a),m(r);case 7:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function x(){return(x=Object(L.a)(S.a.mark((function e(t){var n,a,r,c,s,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.email,c=void 0===r?"":r,s=t.text,o=void 0===s?"":s,e.next=3,V({username:a,email:c,text:Ne(o)});case 3:if("error"!==(i=e.sent).data.status){e.next=8;break}return e.abrupt("return",i.data.message);case 8:return O(g),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){var a=n.pathname+function(e,t){var n,a,r,c=new URLSearchParams;return c.append("sort_field",null!==(n=e.sortField)&&void 0!==n?n:t.sortField),c.append("sort_direction",null!==(a=e.sortDirection)&&void 0!==a?a:t.sortDirection),c.append("page",null!==(r=e.page)&&void 0!==r?r:t.page),"?".concat(c.toString())}(e,g);h({type:o,value:a}),t.push(a)},C=function(){var e=Object(L.a)(S.a.mark((function e(n){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(Object(P.a)(Object(P.a)({},n),{},{text:Ne(n.text)}));case 2:((r=e.sent).data.status=null===(a=r.data.message)||void 0===a?void 0:a.token)?(f(),h(u({})),t.push("/login/0")):O();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O()}),[n.search]),Object(k.jsxs)("dir",{className:"flex-row f-1",children:[Object(k.jsxs)("dir",{className:"flex-column f-1 content-space-between",children:[Object(k.jsx)(ye,{tasks:i,userIsLogin:Boolean(r.username),handleEditTask:C}),Object(k.jsx)(Pe,{totalPageCount:b,curentPage:g.page,onPageChange:function(e){return w({page:e})}})]}),Object(k.jsx)(oe,{sortDirection:g.sortDirection,sortField:g.sortField,handleChange:w,handleCreateTask:function(e){return x.apply(this,arguments)}})]})};Ee.defaultProps={history:{},location:{}};var De=Ee,Ie={pathname:"/tasks",search:"?sort_field=username&sort_direction=asc&page=1"};var Fe=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e(u({username:b()}))}),[e]),Object(k.jsxs)("dir",{className:"app",children:[Object(k.jsx)(C,{}),Object(k.jsxs)(d.d,{children:[Object(k.jsx)(d.b,{path:"/tasks",component:De}),Object(k.jsx)(d.b,{exact:!0,path:"/",children:Object(k.jsx)(d.a,{to:Ie})}),Object(k.jsx)(d.b,{path:"/login",component:Z})]})]})},Te=n(126),Ue=n(123),_e=Object(Te.b)({currentPageUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===o?a:e},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===i?a:e}}),Me=_e,Be=Object(Te.c)(Me,Object(Te.a)(Ue.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(l.a,{store:Be,children:Object(k.jsx)(h.a,{children:Object(k.jsx)(Fe,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[179,1,2]]]);
//# sourceMappingURL=main.f3eebc37.chunk.js.map