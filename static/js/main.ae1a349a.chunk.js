(this["webpackJsonpbeejee-task-manager-app"]=this["webpackJsonpbeejee-task-manager-app"]||[]).push([[0],{147:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),s=n.n(c),o=(n(147),"CURRENT_PAGE_URL"),i="USER_DATA",u=function(e){return{type:i,value:e}},l=n(35),d=n(18),p="test-task-backend-session";function j(e,t){localStorage.setItem(p,JSON.stringify({username:e,token:t}))}function b(){var e=localStorage.getItem(p);return e?JSON.parse(e).username:null}function h(){var e=localStorage.getItem(p);return e?JSON.parse(e).token:null}function f(){localStorage.removeItem(p)}var g=n(43),m=n(2),O=function(e){var t=e.currentPage,n=e.username;return Object(m.jsxs)("dir",{className:"flex-column p-1 m-0 left-panel",children:[Object(m.jsx)(g.b,{to:"/?page=".concat(t),children:"Tasks"}),n?Object(m.jsx)(g.b,{to:"/logout",children:"Logout"}):Object(m.jsx)(g.b,{to:"/login",children:"Login page"})]})},x=function(){var e=Object(l.c)((function(e){return{currentPage:e.currentPage,userData:e.userData}})),t=e.currentPage,n=e.userData.username;return Object(m.jsx)(O,{username:n,currentPage:t,handleLogout:function(){return f()}})},v=n(17),k=n.n(v),w=n(25),y=n(21),C=n(237),S=n(254),L=n(253),P=n(4),E=n(11),D=n(80),I=n(245),N=["name"],F=function(e){var t=e.fieldList,n=e.onChange,a=e.errorList;return t.map((function(e){var t,r=e.name,c=Object(D.a)(e,N);return Object(m.jsx)(I.a,Object(y.a)(Object(y.a)({name:r},c),{},{error:Boolean(a[r]),onChange:n,helperText:null!==(t=a[r])&&void 0!==t?t:" "}),r)}))},T=[{name:"username",label:"Username"},{name:"password",label:"Password"}],U=function(e){var t=e.handleLogin,n=Object(a.useState)({}),r=Object(E.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)({}),i=Object(E.a)(o,2),u=i[0],l=i[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(C.a,{spacing:1,justifyContent:"space-between",style:{width:"310px"},children:Object(m.jsx)(F,{fieldList:T,onChange:function(e){var t=e.target;return s(Object(y.a)(Object(y.a)({},c),{},Object(P.a)({},t.name,t.value)))},errorList:u})}),Object(m.jsx)(C.a,{direction:"row",spacing:2,children:Object(m.jsx)(L.a,{onClick:Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,t(c);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),variant:"outlined",content:"Login",children:"Login"})})]})},_=n(238),M=Object(_.a)({loginPageViewStack:{width:"100%",height:"90vh"}}),R=function(e){var t=e.userData,n=e.currentPageUrl,a=e.handleLogout,r=e.handleLogin,c=e.message,s=M();return Object(m.jsx)(C.a,{className:s.loginPageViewStack,spacing:4,justifyContent:"center",alignItems:"center",children:t.username?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S.a,{children:"You are logged in as ".concat(t.username,".")}),Object(m.jsx)(L.a,{component:g.b,to:"/?page=".concat(n),variant:"outlined",children:"Go back to the Task Page"}),Object(m.jsx)(L.a,{variant:"contained",onClick:a,children:"Logout"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S.a,Object(y.a)({},c)),Object(m.jsx)(U,{handleLogin:r})]})})},A=n(119),B=n.n(A).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2"}),J="Example";function z(e){return V.apply(this,arguments)}function V(){return(V=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={developer:J},e.prev=1,e.next=4,B.get(t,{params:n});case 4:return a=e.sent,e.abrupt("return",{tasks:a.data.message.tasks,totalPageCount:Math.ceil(a.data.message.total_task_count/3)});case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function W(e){return G.apply(this,arguments)}function G(){return(G=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.password,c=void 0===r?"":r,e.prev=1,(s=new FormData).append("username",a),s.append("password",c),o={method:"post",url:"/login?developer=".concat(J),data:s},e.next=8,B(o);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function Y(e){return q.apply(this,arguments)}function q(){return(q=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.email,r=t.text,e.prev=1,(c=new FormData).append("username",n),c.append("email",a),c.append("text",r),s={method:"post",url:"/create?developer=".concat(J),data:c},e.next=9,B(s);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function $(e){return H.apply(this,arguments)}function H(){return(H=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.text,r=t.taskStatus,e.prev=1,(c=new FormData).append("id",n),c.append("text",a),c.append("status",r),c.append("token",h()),s={method:"post",url:"/edit/".concat(n,"?developer=").concat(J),data:c},e.next=10,B(s);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var K=n(123),Q=function(e){var t=e.match(Object(K.a)(/^\/login\/(0)/,{param:1}));return t&&"0"===t.groups.param?{color:"error",children:"You need to log in"}:{}},X=function(e){var t,n=e.location,r=Object(l.c)((function(e){return{currentPageUrl:e.currentPageUrl,userData:e.userData}})),c=r.currentPageUrl,s=r.userData,o=Object(l.b)(),i=null!==(t=b())&&void 0!==t?t:s.username;Object(a.useEffect)((function(){i&&i!==s.username&&o(u({username:i}))}),[i]);var d=function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:if(200!==(n=e.sent).status||"ok"!==n.data.status){e.next=7;break}return j(t.username,n.data.message.token),o(u({username:t.username})),e.abrupt("return",{});case 7:return e.abrupt("return",n.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(R,{userData:s,currentPageUrl:c,message:Q(n.pathname),handleLogout:function(){f(),u({})},handleLogin:d})},Z=n(248),ee=n(249),te=n(255),ne=n(251),ae=n(234),re=function(e){var t=e.label,n=e.options,a=e.value,r=e.onChange;return Object(m.jsxs)(ne.a,{component:"fieldset",children:[Object(m.jsx)(ae.a,{component:"legend",children:t}),Object(m.jsx)(ee.a,{row:!0,value:a,onChange:function(e,t){return r(t)},children:n.map((function(e){return Object(m.jsx)(te.a,{value:e,control:Object(m.jsx)(Z.a,{}),label:e},e)}))})]})},ce=[{name:"username",label:"Name"},{name:"email",label:"E-mail"},{name:"text",label:"Task discription",rows:4,multiline:!0}],se=function(e){var t=e.onSubmitClick,n=Object(a.useState)({}),r=Object(E.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)({}),i=Object(E.a)(o,2),u=i[0],l=i[1],d=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,t(u);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(C.a,{spacing:1,justifyContent:"space-between",children:[Object(m.jsx)(F,{fieldList:ce,onChange:function(e){var t=e.target;return l(Object(y.a)(Object(y.a)({},u),{},Object(P.a)({},t.name,t.value)))},errorList:c}),Object(m.jsx)(L.a,{variant:"contained",onClick:d,children:"Sabmit"})]})},oe=Object(_.a)({rightStack:{justifyContent:"center",alignItems:"center",flex:"0 0 310px"}}),ie=function(e){var t=e.sortField,n=e.sortDirection,a=e.handleChange,r=e.handleCreateTask,c=oe();return Object(m.jsxs)(C.a,{spacing:1,className:c.rightStack,children:[Object(m.jsx)(re,{label:"Sort Field",options:["username","email","status"],value:t,onChange:function(e){return a({sortField:e})}}),Object(m.jsx)(re,{label:"Sort Directions",options:["asc","desc"],value:n,onChange:function(e){return a({sortDirection:e})}}),Object(m.jsx)(se,{onSubmitClick:r})]})},ue=n(122),le=n(250),de=n(34),pe=n(241),je=n(240),be={0:"Task not completed",1:"Task not completed, edited by admin",10:"Mission accomplished",11:"The task was edited by the admin and completed"},he=Object(_.a)({ExpandMoreIcon:{fontSize:"large"},statusMenuItem:{display:"block"},div:function(e){return{cursor:e.isEditingEnabled?"arrow":"pointer",marginLeft:"auto"}}}),fe=Object(de.a)({paper:{border:"2px solid rgba(49, 54, 65, 1)","& .MuiList-root":{padding:0}}})((function(e){return Object(m.jsx)(ue.a,Object(y.a)({elevation:0,getvontentanchorel:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),ge=function(e){var t=e.value,n=e.onChange,r=e.isEditingEnabled,c=he({isEditingEnabled:r}),s=Object(a.useState)(null),o=Object(E.a)(s,2),i=o[0],u=o[1],l=Boolean(i);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(je.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:r?function(e){var t=e.currentTarget;u(t)}:function(){},endIcon:r?Object(m.jsx)(pe.a,{}):void 0,children:"Status: ".concat(be[t])}),r&&Object(m.jsx)(fe,{id:"basic-menu",anchorEl:i,open:l,onClose:function(){return u(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object.keys(be).map((function(e){return Object(m.jsx)(le.a,{className:c.statusMenuItem,selected:e===t,onClick:function(){return t=e,u(null),void n(t);var t},children:be[e]},e)}))})]})})},me=n(242),Oe=n(243),xe=n(120),ve=n.n(xe),ke=n(244),we=Object(_.a)({noBorder:{border:"none"},marginLeftAuto:{marginLeft:"auto"}}),ye=function(e){var t=e.data,n=e.userIsLogin,r=e.handleEditTask,c=Object(a.useState)(t.text),s=Object(E.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(t.status),l=Object(E.a)(u,2),d=l[0],p=l[1],j=we(),b=Object(a.useState)(!1),h=Object(E.a)(b,2),f=h[0],g=h[1];return Object(m.jsxs)("dir",{className:"p-1 flex-column task-box",children:[Object(m.jsx)("dir",{children:Object(m.jsx)(me.a,{children:"USERNAME: ".concat(t.username," E-MAIL: ").concat(t.email)})}),Object(m.jsx)(I.a,{variant:"outlined",fullWidth:!0,defaultValue:t.text,InputProps:{classes:{notchedOutline:j.noBorder},readOnly:!f},onChange:function(e){return i(e.target.value)}}),Object(m.jsxs)(C.a,{direction:"row",children:[Object(m.jsx)(ge,{value:t.status,onChange:function(e){return p(e)},isEditingEnabled:f}),n&&Object(m.jsx)(Oe.a,{className:j.marginLeftAuto,size:"small",onClick:function(){f&&r({id:t.id,text:o,taskStatus:d}),g(!f)},children:f?Object(m.jsx)(ke.a,{}):Object(m.jsx)(ve.a,{})})]})]})},Ce=["tasks"],Se=function(e){var t=e.tasks,n=Object(D.a)(e,Ce);return Object(m.jsx)("dir",{className:"flex-column f-1 p-1",children:t.map((function(e){return Object(m.jsx)(ye,Object(y.a)({data:e},n),e.id)}))})},Le=n(246),Pe=function(e){var t=e.totalPageCount,n=e.curentPage,a=e.onPageChange;return Object(m.jsx)(C.a,{spacing:2,justifyContent:"space-around",children:Object(m.jsx)(Le.a,{count:t,page:n,shape:"rounded",onChange:function(e,t){return a(t)}})})},Ee=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},De=function(e){var t=e.history,n=e.location,r=Object(l.c)((function(e){return e.userData})),c=Object(a.useState)([]),s=Object(E.a)(c,2),i=s[0],d=s[1],p=Object(a.useState)(0),j=Object(E.a)(p,2),b=j[0],h=j[1],g=Object(l.b)(),O=function(e){var t=new URLSearchParams(e);return{page:parseInt(t.get("page")),sortDirection:t.get("sort_direction"),sortField:t.get("sort_field")}}(n.search);function x(){return v.apply(this,arguments)}function v(){return v=Object(w.a)(k.a.mark((function e(){var t,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n.search);case 2:t=e.sent,a=t.tasks,r=t.totalPageCount,d(a),h(r);case 7:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function C(){return(C=Object(w.a)(k.a.mark((function e(t){var n,a,r,c,s,o,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=void 0===n?"":n,r=t.email,c=void 0===r?"":r,s=t.text,o=void 0===s?"":s,e.next=3,Y({username:a,email:c,text:Ee(o)});case 3:if("error"!==(i=e.sent).data.status){e.next=8;break}return e.abrupt("return",i.data.message);case 8:return x(O),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){var a=n.pathname+function(e,t){var n,a,r,c=new URLSearchParams;return c.append("sort_field",null!==(n=e.sortField)&&void 0!==n?n:t.sortField),c.append("sort_direction",null!==(a=e.sortDirection)&&void 0!==a?a:t.sortDirection),c.append("page",null!==(r=e.page)&&void 0!==r?r:t.page),"?".concat(c.toString())}(e,O);g({type:o,value:a}),t.push(a)},L=function(){var e=Object(w.a)(k.a.mark((function e(n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(Object(y.a)(Object(y.a)({},n),{},{text:Ee(n.text)}));case 2:((a=e.sent).data.status=a.data.message.token)?(f(),g(u({})),t.push("/login/0")):x();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[n.search]),Object(m.jsxs)("dir",{className:"flex-row f-1",children:[Object(m.jsxs)("dir",{className:"flex-column f-1 task-page-container",children:[Object(m.jsx)(Se,{tasks:i,userIsLogin:Boolean(r.username),handleEditTask:L}),Object(m.jsx)(Pe,{totalPageCount:b,curentPage:O.page,onPageChange:function(e){return S({page:e})}})]}),Object(m.jsx)(ie,{sortDirection:O.sortDirection,sortField:O.sortField,handleChange:S,handleCreateTask:function(e){return C.apply(this,arguments)}})]})};De.defaultProps={history:{},location:{}};var Ie=De,Ne={pathname:"/tasks",search:"?sort_field=username&sort_direction=asc&page=1"};var Fe=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e(u({username:b()}))}),[e]),Object(m.jsxs)("dir",{className:"w-100 h-100 flex-row",children:[Object(m.jsx)(x,{}),Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{path:"/tasks",component:Ie}),Object(m.jsx)(d.b,{exact:!0,path:"/",children:Object(m.jsx)(d.a,{to:Ne})}),Object(m.jsx)(d.b,{path:"/login",component:X})]})]})},Te=n(124),Ue=n(121),_e=Object(Te.b)({currentPageUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===o?a:e},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.value;return n===i?a:e}}),Me=_e,Re=Object(Te.c)(Me,Object(Te.a)(Ue.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(l.a,{store:Re,children:Object(m.jsx)(g.a,{children:Object(m.jsx)(Fe,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[178,1,2]]]);
//# sourceMappingURL=main.ae1a349a.chunk.js.map